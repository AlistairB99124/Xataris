<div *ngIf="!data.confirmForm" id="forms" class="page-layout simple fullwidth" fxLayout="column" fusePerfectScrollbar>
    <!-- HEADER -->
    <div class="header xataris-accent-bg p-24 h-160" fxLayout="row" fxLayoutAlign="start center">
        <div fxLayout="column" fxLayoutAlign="center start">
            <div class="black-fg" fxLayout="row" fxLayoutAlign="start center">
                <mat-icon class="secondary-text s-16">home</mat-icon>
                <mat-icon class="secondary-text s-16">chevron_right</mat-icon>
                <span class="secondary-text">{{'PTMMANAGEMENT.TIMESHEETS' | translate}}</span>
            </div>
            <div class="h1 mt-16">{{'PTMMANAGEMENT.TITLE' | translate}}</div>
        </div>
    </div>
    <!-- / HEADER -->
    <!-- CONTENT -->
    <mat-progress-bar *ngIf="data.loader" mode="indeterminate"></mat-progress-bar>
    <div class="content p-16">
        <div class="fuse-widget-front mat-white-bg mat-elevation-z2">
            <mat-toolbar class="mat-white-bg mat-elevation-z4">
                <mat-toolbar-row fxFlex>
                    <span fxFlex>{{'PTMMANAGEMENT.TIMESHEETS' | translate}}</span>
                    <button matTooltip="Hide Details" *ngIf="data.showToggleOn" mat-icon-button class="mat-icon-button" (click)="showDetails(false)"
                            aria-label="Hide Details">
                        <mat-icon class="s-24"><img src="assets/icons/toggle_on.png"></mat-icon>
                    </button>
                    <button matTooltip="Show Details" *ngIf="data.showToggleOff" mat-icon-button class="mat-icon-button" (click)="showDetails(true)"
                            aria-label="Show Details">
                        <mat-icon class="s-24"><img src="assets/icons/toggle_off.png"></mat-icon>
                    </button>
                    <button matTooltip="Export Grid" mat-icon-button class="mat-icon-button" (click)="downloadGrid()"
                            aria-label="Add Order">
                        <mat-icon class="s-24">cloud_download</mat-icon>
                    </button>
                    <button matTooltip="Download Timesheet" [disabled]="!enableDelete()" mat-icon-button class="mat-icon-button" (click)="downloadPdf()"
                            aria-label="Add Order">
                        <mat-icon class="s-24">cloud_upload</mat-icon>
                    </button>
                    <button matTooltip="Delete Group" [disabled]="!enableDelete()" mat-icon-button class="mat-icon-button" (click)="deleteTimesheet()"
                            aria-label="Delete Order(s)">
                        <mat-icon class="s-24">delete</mat-icon>
                    </button>
                </mat-toolbar-row>
            </mat-toolbar>
            <mat-divider></mat-divider>
            <mat-card>
                <mat-card-content>
                    <div>
                        <mat-table #table [dataSource]="dataSource">
                            <!-- Position Column -->
                            <ng-container matColumnDef="timesheetId">
                                <mat-header-cell *matHeaderCellDef style="flex: 0 0 50px !important; white-space: unset !important;"></mat-header-cell>
                                <mat-cell *matCellDef="let element" style="flex: 0 0 50px !important; white-space: unset !important; text-align: center;">
                                    <input type="checkbox" [(ngModel)]="element.isSelected" />
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="code">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.CODE' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.code}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="dateCreated">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.DATE' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.dateCreated}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="specificLocation">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.SPECIFICLOCATION' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.specificLocation}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="detailedPoint">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.DETAILEDPOINT' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.detailedPoint}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="status">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.SHEETSTATUS' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.status}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="description">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.DESCRIPTION' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.description}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="operatorTime">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.PLUMBERTIME' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.operatorTime}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="assistantTime">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.ASSISTANTTIME' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.assistantTime}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="originalQuote">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.ORIGINALQUOTE' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.originalQuote}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="quoteNo">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.QUOTENO' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.quoteNo}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="siNumber">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.SINO' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.siNumber}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="plumber">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.PLUMBER' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.plumber}} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="site">
                                <mat-header-cell *matHeaderCellDef> {{'PTMMANAGEMENT.SITE' | translate}} </mat-header-cell>
                                <mat-cell *matCellDef="let element"> {{element.site}} </mat-cell>
                            </ng-container>
                            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                        </mat-table>
                        <mat-paginator [pageSizeOptions]="[10, 20]" showFirstLastButtons></mat-paginator>
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
        <!-- / CONTENT -->

    </div>
    <!-- / CENTER -->
</div>
<div *ngIf="data.confirmForm" id="invoice" class="modern page-layout blank" fxLayout="row" fusePerfectScrollbar>

    <div class="invoice-container">
        <mat-progress-bar *ngIf="data.loader"></mat-progress-bar>
        <!-- INVOICE -->
        <div class="card m-0 p-24" id="formImage" style="position: relative;">

            <div class="header" fxLayout="row" fxLayoutAlign="space-between start">

                <div class="ids" fxLayout="column">

                    <div fxLayout="row" class="seller" fxLayoutAlign="start center">

                        <div class="logo">
                            <img id="logoImg" src="assets/images/Plumbery/logo.png" width="350" height="183">
                        </div>
                    </div>
                </div>
                <table class="summary mt-16">
                    <tr class="code">
                        <td class="label">TIMESHEET</td>
                        <td class="value">{{data.selectedTimesheet.code}}</td>
                    </tr>
                    <tr>
                        <td class="label">SITE</td>
                        <td class="value">{{data.selectedTimesheet.site}}</td>
                    </tr>
                    <tr>
                        <td class="label">TIMESHEET DATE</td>
                        <td class="value">{{data.selectedTimesheet.dateCreated}}</td>
                    </tr>
                </table>
            </div>

            <div class="invoice-content">
                <table class="simple invoice-table">
                    <tr>
                        <td style="width: 20%; text-align: right;">
                            <label><b>Specific Location</b></label>
                        </td>
                         <td style="width: 30%;">
                            <span>{{data.selectedTimesheet.specificLocation}}</span>
                        </td>
                         <td style="width: 20%; text-align: right;">
                            <label><b>Detailed Point</b></label>
                        </td>
                         <td style="width: 30%;">
                            <span>{{data.selectedTimesheet.detailedPoint}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">
                            <label><b>Completion Status</b></label>
                        </td>
                         <td>
                            <span>{{data.selectedTimesheet.status}}</span>
                        </td>
                        <td style="text-align: right;">
                            <label><b>Additional Work: S.I. Number</b></label>
                        </td>
                         <td>
                            <span>{{data.selectedTimesheet.siNumber}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">
                            <label><b>Part of Original Quote?</b></label>
                        </td>
                        <td>
                            <span>{{data.selectedTimesheet.originalQuote}}</span>
                        </td>
                        <td colspan="1" style="text-align: right;">
                            <label><b>Quote No</b></label>
                        </td>
                        <td colspan="3">
                            <span>{{data.selectedTimesheet.quoteNo}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td><label><b>Time Worked</b></label></td>
                        <td colspan="3">
                            <label class="px-12">Plumber:</label><span>{{data.selectedTimesheet.operatorTime}}</span>
                            <label class="px-12">Assistant:</label><span>{{data.selectedTimesheet.assistantTime}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: right;"><label><b>Description of Work Done</b></label></td>
                        <td colspan="3"><span>{{data.selectedTimesheet.description}}</span></td>
                    </tr>
                </table>
                <table class="simple invoice-table mt-12">
                    <thead>
                        <tr>
                            <th>BOM No.</th>
                            <th>CODE</th>
                            <th>DESCRIPTION</th>
                            <th class="text-right">QUANTITY</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let material of data.materials">
                            <td>
                                <div class="detail">{{material.BOM_NO}}</div>
                            </td>
                            <td>
                                <div class="detail">{{material.code}}</div>
                            </td>
                            <td>
                                <div class="detail">{{material.description}}</div>
                            </td>
                            <td class="text-right">
                                {{material.quantity}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="footer mt-24">
                <div fxLayout="row" fxLayoutAlign="start start">
                    <div class="logo">
                        <img src="assets/images/logos/xataris.png">
                    </div>
                    <div class="note" fxLayout="row">                        
                        <span>Signed: ____________________________________</span>
                        <span class="mx-12">Name:</span>
                        <span>{{data.selectedTimesheet.plumber}}</span>
                    </div>
                </div>
            </div>

        </div>
        <!-- / INVOICE -->

    </div>

</div>
