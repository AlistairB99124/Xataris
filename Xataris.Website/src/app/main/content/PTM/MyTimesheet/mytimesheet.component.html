    <div id="forms" *ngIf="!data.confirmForm" class="page-layout simple fullwidth" #content fxLayout="column" fusePerfectScrollbar>
        <!-- HEADER -->
        <div class="header xataris-accent-bg p-24 h-160" fxLayout="row" fxLayoutAlign="start center">
            <div fxLayout="column" fxLayoutAlign="center start">
                <div class="black-fg" fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon class="secondary-text s-16">home</mat-icon>
                    <mat-icon class="secondary-text s-16">chevron_right</mat-icon>
                    <span class="secondary-text">{{'MYTIMESHEET.PTM' | translate}}</span>
                </div>
                <div class="h1 mt-16">{{'MYTIMESHEET.TITLE' | translate}}</div>
            </div>
        </div>
        <!-- / HEADER -->
        <!-- CONTENT -->
        <div class="content p-16">
            <mat-toolbar class="mat-white-bg mat-elevation-z4">
                    <mat-toolbar-row fxLayoutAlign="end center">
                            <button mat-button attr.aria-label="{{'MYTIMESHEET.SAVETIMESHEET' | translate}}" matTooltip="{{'MYTIMESHEET.SAVETIMESHEET' | translate}}" (click)="saveTimesheet()" mat-icon-button class="p-5">
                                <mat-icon>save</mat-icon>
                            </button>
                    </mat-toolbar-row>
            </mat-toolbar>
            <mat-divider></mat-divider>
            <mat-card>
                <mat-card-content>
                    <mat-horizontal-stepper [linear]="true" #stepper="matHorizontalStepper">
                        <mat-step [stepControl]="form">
                                <ng-template matStepLabel>{{'MYTIMESHEET.DETAILS' | translate}}</ng-template>
                                <form class="p-0" fxLayout="column" fxLayoutAlign="start"
                                fxFlex name="form" [formGroup]="form">            
                            <div fxLayout="row">
                                <div fxLayout="column" fxFlex fxLayoutAlign="start center">
                                    <div fxLayout="row" style="width:100%">
                                            <mat-form-field fxFlex>                                            
                                                    <mat-select fxFlex matInput #primaryTechnician (change)="reloadMaterials()" required placeholder="{{'MYTIMESHEET.TECHNICIAN' | translate}}" formControlName="primaryTechnician">
                                                        <mat-option *ngFor="let op of data.operators" [value]="op.value">
                                                            {{ op.text }}
                                                        </mat-option>
                                                    </mat-select>
                                            </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%">
                                            <mat-form-field fxFlex>                                            
                                                    <mat-select fxFlex matInput #site (change)="updateSite()" placeholder="{{'MYTIMESHEET.SITE' | translate}}" formControlName="site" required>
                                                        <mat-option *ngFor="let site of data.sites" [value]="site.id">
                                                            {{site.name}}
                                                        </mat-option>
                                                    </mat-select>
                                            </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%">
                                        <mat-form-field fxFlex>                                            
                                                <mat-select fxFlex matInput #status placeholder="{{'MYTIMESHEET.STATUS' | translate}}" formControlName="status" required>
                                                    <mat-option *ngFor="let status of data.statusAvailable" [value]="status.value">
                                                        {{status.text}}
                                                    </mat-option>
                                                </mat-select>
                                        </mat-form-field>
                                </div>
                                    <div fxLayout="row" style="width:100%">
                                        <mat-form-field fxFlex>
                                            <input matInput #specificLocation placeholder="{{'MYTIMESHEET.SPECIFICLOCATION' | translate}}" formControlName="specificLocation">
                                        </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%">
                                        <mat-form-field fxFlex>
                                            <input matInput #detailedPoint placeholder="{{'MYTIMESHEET.DETAILEDPOINT' | translate}}" formControlName="detailedPoint">
                                        </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%">
                                        <mat-form-field fxFlex>
                                            <input matInput #description placeholder="{{'MYTIMESHEET.DESCRIPTION' | translate}}" formControlName="description">
                                        </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%">
                                        <mat-form-field fxFlex>
                                            <input matInput #siNumber placeholder="{{'MYTIMESHEET.SINUMBER' | translate}}" formControlName="siNumber">
                                        </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%; height: 70px" fxLayoutAlign="start center">
                                        <div fxLayout="column" class="mr-16" fxFlex="30">
                                            <mat-checkbox fxFlex matInput [(ngModel)]="data.quoteEnabled" [ngModelOptions]="{standalone: true}">{{'MYTIMESHEET.QUOTENO' | translate}}</mat-checkbox>
                                        </div>
                                        <div fxLayout="column" fxFlex="60" *ngIf="data.quoteEnabled">                                        
                                            <mat-form-field style="width: 100%;">
                                                <input matInput #quoteNo placeholder="{{'MYTIMESHEET.QUOTENUMBER' | translate}}" formControlName="quoteNumber">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div fxLayout="row" style="width:100%" fxLayoutAlign="start center">
                                            <div fxLayout="column" fxFlex>                                            
                                                <div fxLayout="row" fxLayoutAlign="start center">
                                                    <label>{{'MYTIMESHEET.TECHNICIAN' | translate}}</label>
                                                </div>
                                                <div fxLayout="row" fxLayoutAlign="start center">
                                                    <mat-form-field fxFlex="30">                                            
                                                            <mat-select matInput #primaryHours placeholder="{{'MYTIMESHEET.HR' | translate}}" matTooltip="{{'MYTIMESHEET.HOURS' | translate}}" formControlName="primaryHours">
                                                                <mat-option *ngFor="let hour of data.hoursAvailable" [value]="hour.value">
                                                                    {{hour.text}}
                                                                </mat-option>
                                                            </mat-select>
                                                    </mat-form-field>
                                                    <mat-form-field fxFlex="30">                                            
                                                            <mat-select matInput #primaryMins placeholder="{{'MYTIMESHEET.MIN' | translate}}" matTooltip="{{'MYTIMESHEET.MINUTES' | translate}}" formControlName="primaryMins">
                                                                <mat-option *ngFor="let min of data.minsAvailable" [value]="min.value">
                                                                    {{min.text}}
                                                                </mat-option>
                                                            </mat-select>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                    </div>
                                    <div fxLayout="row" style="width:100%" fxLayoutAlign="start center">
                                        <div fxLayout="column" fxFlex>
                                            <div fxLayout="row" fxLayoutAlign="start center">
                                                <label>{{'MYTIMESHEET.TECHNICIANTWO' | translate}}</label>
                                            </div>
                                            <div fxLayout="row" fxLayoutAlign="start center">                                            
                                                <mat-form-field fxFlex="30">                                            
                                                        <mat-select matInput #secondaryHours placeholder="{{'MYTIMESHEET.HR' | translate}}" matTooltip="{{'MYTIMESHEET.HOURS' | translate}}" formControlName="secondaryHours">
                                                            <mat-option *ngFor="let hour of data.hoursAvailable" [value]="hour.value">
                                                                {{hour.text}}
                                                            </mat-option>
                                                        </mat-select>
                                                </mat-form-field>
                                                <mat-form-field fxFlex="30">                                            
                                                        <mat-select matInput #secondaryMins placeholder="{{'MYTIMESHEET.MIN' | translate}}" matTooltip="{{'MYTIMESHEET.MINUTES' | translate}}" formControlName="secondaryMins">
                                                            <mat-option *ngFor="let min of data.minsAvailable" [value]="min.value">
                                                                {{min.text}}
                                                            </mat-option>
                                                        </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div fxLayout="row" fxLayoutAlign="space-between center">
                                <button mat-button matStepperPrevious>{{'MYTIMESHEET.BACK' | translate}}</button>
                                <button mat-button matStepperNext>{{'MYTIMESHEET.NEXT' | translate}}</button>
                        </div>
                        </mat-step>
                        <mat-step [stepControl]="materialForm">
                                <form class="p-0" fxLayout="column" fxLayoutAlign="start"
                                fxFlex name="materialForm" [formGroup]="materialForm">  
                                <ng-template matStepLabel>{{'MYTIMESHEET.MATERIALS' | translate}}</ng-template>          
                            <div fxLayout="row">
                                <div fxLayout="column" fxFlex>
                                        <div fxLayout="row" style="width:100%">
                                            <div fxLayout="column" fxFlex>
                                                    <mat-checkbox matInput [(ngModel)]="data.nonStockItem" [ngModelOptions]="{standalone: true}">{{'MYTIMESHEET.NONSTOCKITEMQ' | translate}}</mat-checkbox>
                                            </div>
                                        </div>
                                    <div fxLayout="row" style="width:100%" class="mt-6">
                                            <div fxLayout="column" fxFlex *ngIf="data.nonStockItem">                                        
                                                <mat-form-field class="example-full-width" style="width:100%">
                                                    <input matInput #nonMaterial placeholder="{{'MYTIMESHEET.NONSTOCKITEM' | translate}}" formControlName="nonMaterial">
                                                </mat-form-field>
                                            </div>
                                            <div fxLayout="column" fxFlex *ngIf="!data.nonStockItem">   
                                                    <mat-form-field fxFlex>                                           
                                                        <input matInput placeholder="{{'MYTIMESHEET.SEARCHMAT' | translate}}" [(ngModel)]="searchInput" [ngModelOptions]="{standalone: true}" (change)="searchMaterials()" /> 
                                                    </mat-form-field>
                                                    <mat-form-field fxFlex>                                                                                            
                                                            <mat-select fxFlex matInput #material placeholder="Material" formControlName="material">
                                                                <mat-option *ngFor="let inv of data.filterMaterials" [value]="inv.value">
                                                                    {{inv.text}}
                                                                </mat-option>
                                                            </mat-select>
                                                    </mat-form-field>
                                            </div>
                                    </div>
                                    <div fxLayout="row" style="width:100%">
                                        <mat-form-field fxFlex>
                                            <input matInput #bomNo placeholder="BOM No." formControlName="bomNo">
                                        </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%">
                                        <mat-form-field fxFlex *ngIf="data.nonStockItem">
                                            <input matInput #quantity placeholder="{{'MYTIMESHEET.QUANTITY' | translate}}" formControlName="quantity">
                                        </mat-form-field>
                                        <mat-form-field fxFlex *ngIf="!data.nonStockItem">
                                                <input matInput #quantity placeholder="{{'MYTIMESHEET.QUANTITY' | translate}}" type="number" formControlName="quantity">
                                            </mat-form-field>
                                    </div>
                                    <div fxLayout="row" style="width:100%" fxLayoutAlign="end center">
                                            <button mat-button mat-icon-button (click)="addMaterial()" attr.aria-label="{{'MYTIMESHEET.ADDMATERIAL' | translate}}"><mat-icon attr.aria-label="{{'MYTIMESHEET.ADDMATERIAL' | translate}}" matTooltip="{{'MYTIMESHEET.ADDMATERIAL' | translate}}">add</mat-icon></button>
                                    </div>
                                    <div fxLayout="row" style="width:100%" class="mb-20">
                                            <mat-table fxFlex #table [dataSource]="dataSource">

                                                    <!-- Position Column -->
                                                    <ng-container matColumnDef="id">
                                                            <mat-header-cell style="flex: 0 0 40px !important; white-space: unset !important;" *matHeaderCellDef></mat-header-cell>
                                                            <mat-cell style="flex: 0 0 40px !important; white-space: unset !important; text-align: center;" *matCellDef="let row">
                                                                <button attr.aria-label="{{'MYTIMESHEET.DELETEMATERIAL' | translate}}" matTooltip="{{'MYTIMESHEET.DELETEMATERIAL' | translate}}" mat-button mat-icon-button (click)="deleteMaterial(row.id)">
                                                                    <mat-icon>delete</mat-icon>
                                                                </button>
                                                            </mat-cell>            
                                                        </ng-container>
                                                    <ng-container *ngFor="let col of data.materialColumns" matColumnDef="{{col.columnName}}">
                                                    <mat-header-cell *matHeaderCellDef> {{col.displayName}} </mat-header-cell>
                                                    <mat-cell *matCellDef="let element"> {{element[col.columnName]}} </mat-cell>
                                                    </ng-container>                        
                                                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                                                    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                                                </mat-table>
                                    </div>                           
                                </div>
                            </div>
                        </form>
                        <div>
                                <button mat-button matStepperPrevious>Back</button>
                            </div>
                        </mat-step>
                    </mat-horizontal-stepper>
                </mat-card-content>
            </mat-card>
            
        </div>
        <!-- / CONTENT -->
    </div>
    <div *ngIf="data.confirmForm" style="display: none;" id="invoice" class="modern page-layout blank" fxLayout="row" fusePerfectScrollbar>

        <div class="invoice-container">
            <mat-progress-bar *ngIf="data.loader"></mat-progress-bar>
            <!-- INVOICE -->
            <div class="card m-0 p-24" id="formImage" style="position: relative;">

                <div class="header" fxLayout="row" fxLayoutAlign="space-between start">

                    <div class="ids" fxLayout="column">

                        <div fxLayout="row" class="seller" fxLayoutAlign="start center">

                            <div class="logo">
                                <img src="assets/images/Plumbery/logo.png" width="480" height="250">
                            </div>
                        </div>
                    </div>
                    <table class="summary mt-16">
                        <tr class="code">
                            <td class="label">TIMESHEET</td>
                            <td class="value">{{data.timesheetNo}}</td>
                        </tr>
                        <tr>
                            <td class="label">SITE</td>
                            <td class="value">{{data.siteName}}</td>
                        </tr>
                        <tr>
                            <td class="label">TIMESHEET DATE</td>
                            <td class="value">{{data.date}}</td>
                        </tr>
                    </table>
                </div>

                <div class="invoice-content">
                    <table class="simple invoice-table">
                        <tr>
                            <td style="width: 20%; text-align: right;">
                                <label><b>Specific Location</b></label>
                            </td>
                             <td style="width: 30%;">
                                <span>{{form.controls.specificLocation.value}}</span>
                            </td>
                             <td style="width: 20%; text-align: right;">
                                <label><b>Detailed Point</b></label>
                            </td>
                             <td style="width: 30%;">
                                <span>{{form.controls.detailedPoint.value}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: right;">
                                <label><b>Completion Status</b></label>
                            </td>
                             <td>
                                <span>{{data.statusLabel}}</span>
                            </td>
                            <td style="text-align: right;">
                                <label><b>Additional Work: S.I. Number</b></label>
                            </td>
                             <td>
                                <span>{{form.controls.siNumber.value}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: right;">
                                <label><b>Part of Original Quote?</b></label>
                            </td>
                            <td>
                                <span>{{data.quoteEnabled ? 'YES' : 'NO'}}</span>
                            </td>
                            <td colspan="1" style="text-align: right;">
                                <label><b>Quote No</b></label>
                            </td>
                            <td colspan="3">
                                <span>{{form.controls.quoteNumber.value}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td><label><b>Time Worked</b></label></td>
                            <td colspan="3">
                                <label class="px-12">Plumber:</label><span>{{form.controls.primaryHours.value + 'h ' + form.controls.primaryMins.value + 'min'}}</span>
                                <label class="px-12">Assistant:</label><span>{{form.controls.secondaryHours.value + 'h ' + form.controls.secondaryMins.value + 'min'}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: right;"><label><b>Description of Work Done</b></label></td>
                            <td colspan="3"><span>{{form.controls.description.value}}</span></td>
                        </tr>
                    </table>
                    <table class="simple invoice-table mt-12">
                        <thead>
                            <tr>
                                <th>BOM No.</th>
                                <th>CODE</th>
                                <th>DESCRIPTION</th>
                                <th class="text-right">QUANTITY</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let material of dataSource.data">
                                <td>
                                    <div class="detail">{{material.bomNo}}</div>
                                </td>
                                <td>
                                    <div class="detail">{{material.stockCode}}</div>
                                </td>
                                <td>
                                    <div class="detail">{{material.stockDescription}}</div>
                                </td>
                                <td class="text-right">
                                    {{material.quantity}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="footer mt-24">
                    <div fxLayout="row" fxLayoutAlign="start start">
                        <div class="logo">
                            <img src="assets/images/logos/xataris.png">
                        </div>
                        <div class="note" fxLayout="row">                        
                            <span>Signed: ____________________________________</span>
                            <span class="mx-12">Name:</span>
                            <span>{{data.technician}}</span>
                        </div>
                    </div>
                </div>

            </div>
            <!-- / INVOICE -->

        </div>

    </div>